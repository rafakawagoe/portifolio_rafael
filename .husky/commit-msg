#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Commit message format validation
commit_msg_file=$1
commit_msg=$(Get-Content $commit_msg_file)

# Pattern for conventional commits
$pattern = "^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(.+\))?: .{1,}"

if (-not ($commit_msg -match $pattern)) {
    Write-Host " Invalid commit message format!" -ForegroundColor Red
    Write-Host ""
    Write-Host "Commit message must follow Conventional Commits format:" -ForegroundColor Yellow
    Write-Host "  type(scope?): subject" -ForegroundColor Cyan
    Write-Host ""
    Write-Host "Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert" -ForegroundColor Yellow
    Write-Host ""
    Write-Host "Examples:" -ForegroundColor Green
    Write-Host "  feat: add new carousel component"
    Write-Host "  fix(navbar): resolve navigation scroll issue"
    Write-Host "  docs: update README with setup instructions"
    exit 1
}
